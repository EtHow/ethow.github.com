/*
 * 
 * Author: Waseem Ashraf
 * URI: www.ethow.com
 * Copyright: All rights reserved
 * 
 */

if(typeof(jQuery)=="undefined"){alert("jQuery not available. Read instructions to add it.\nEtHow greetings")}(function(c,b){var a=new Object();a.startDate=b.start_date;a.endDate=b.end_date;a.month=b.month;a.year=b.year;a.image_link=b.image_link;a.full_image_link=b.full_image_link;a.image_title=b.image_title;a.isStorageDefined=function(){if(typeof(Storage)!=="undefined"){return true}else{return false}};a.getFGstatus=function(){if(this.isStorageDefined()==true){var d=localStorage.getItem("festival_greetings");if(d!=null&&d=="hide"||d=="show"){return d}else{return 2}}else{return 0}};a.setFGstatus=function(d){if(this.isStorageDefined()==true){localStorage.setItem("festival_greetings",d);return 1}else{return 0}};a.addHtmlToTheBody=function(){var d='<div id="festival_greetings" style="display: none;">';d+='<div id="festival_greetings_hide_b">Hide this</div>';d+='<div id="festival_greetings_container"><a href="'+this.full_image_link+'" target="_blank"><img src="'+this.image_link+'" alt="'+this.image_title+'" title="'+this.image_title+'"></a></div>';d+="</div>";c("body").append(d)};a.getImgIdentityFromLS=function(){if(this.isStorageDefined()==true){var d=localStorage.getItem("festival_greetings_img_id");if(d!=null){return d}else{return 2}}else{return 0}};a.addImgIdentityToLS=function(){var d=c("#festival_greetings_container img").attr("src");d=d.substr(-7);d=encodeURIComponent(d);if(this.isStorageDefined()==true){if(d!=this.getImgIdentityFromLS()){localStorage.setItem("festival_greetings_img_id",d);this.setFGstatus("show")}}};a.showGreetings=function(){if(this.isStorageDefined()==true){var e=new Date();if(e.getDate()>=this.startDate&&e.getDate()<=this.endDate&&e.getMonth()+1==this.month&&e.getFullYear()==this.year&&(this.getFGstatus()=="show"||this.getFGstatus()==2)){c("#festival_greetings").slideDown();this.setFGstatus("show");window.setTimeout(function(){c("#festival_greetings").animate({opacity:"0.6"})},3000)}}else{alert("Please upgrade your browser to any famous one for full experiance.")}};a.hideGreetings=function(){c("#festival_greetings").slideUp();this.setFGstatus("hide")};a.LBverticalAlign=function(){var d=c("#ETH_lightBox_container img")[0];var e=function(g){var f=c(g).height();var h=c(window,document).height();if(h>f){c("#ETH_lightBox_container").animate({"margin-top":(h/2)/2})}};if(d.complete==false){c(d).load(function(){e(d)})}else{e(d)}};a.showLB=function(){var d='<div id="ETH_lightBox" style="display: none;"><div id="ETH_lightBox_hide">Hide it</div><div id="ETH_lightBox_container"><img src="'+this.full_image_link+'"></div></div>';c("body").prepend(d);c("#ETH_lightBox").fadeIn({complete:function(){a.LBverticalAlign();c(this).append('<div style="position: fixed; bottom: 5px; right: 5px;"><a style="color: #dddddd; text-decoration: none; font-weight: bold;" href="http://ethow.github.io/show-one-time-greetings/" target="_blank">Get this</a></div>')}})};a.hideLB=function(){c("body").on("click","#ETH_lightBox_hide, #ETH_lightBox_container",function(){c("#ETH_lightBox_container").animate({"margin-top":0},{complete:function(){c("#ETH_lightBox_container").slideUp({complete:function(){c("#ETH_lightBox").fadeOut({complete:function(){c("#ETH_lightBox").remove()}})}})}})})};c(function(){a.addHtmlToTheBody();a.addImgIdentityToLS();a.showGreetings();c("#festival_greetings_hide_b").on("click",function(){a.hideGreetings()});c("#festival_greetings_container a").click(function(d){d.preventDefault();a.showLB()});a.hideLB()})})(jQuery,greeting_settings);